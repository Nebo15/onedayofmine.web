<?
$this->title = "My followers and following";
$this->menu = 'me';
?>
{{wrap with="layout.phtml"}}
{{into slot="content"}}
<div class="row">
    <div class="span5 offset1" style="margin-right:30px">
		    <h1>Followers <small><?= count($this->followers); ?> people</small></h1>
	      {{apply template="users_list" users="{$#followers}"/}}
    </div>
    <div class="span5">
        <h1>Following <small><?= count($this->following); ?> people</small></h1>
        {{apply template="users_list" users="{$#following}"/}}
    </div>
</div>
{{/into}}
{{into slot="js_ready"}}
	$('.follow-action').click(function() {
		API.request('POST', 'users/'+$(this).attr('user_id')+'/follow').send();
		$(this).hide();
		$(this).parent().find('.unfollow-action').css('display', 'block');
	});
	$('.unfollow-action').click(function() {
		API.request('POST', 'users/'+$(this).attr('user_id')+'/unfollow').send();
		$(this).hide();
		$(this).parent().find('.follow-action').css('display', 'block');
	});
{{/into}}
{{/wrap}}
