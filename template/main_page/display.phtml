<?
$this->title = "Live the life through other people's eyes";
$this->menu = 'journal';
?>

{{template name="medium_day"}}
	<? $additional_class = isset($additional_class) ? $additional_class : ''; ?>
	<li class="medium-item {$additional_class}">
		<? if(isset($title)) { ?>
			<h3 class="muted">
				{$title}
				<? if(isset($icon)) { ?>
					<i class="icon icon-{$icon}"></i>&nbsp;
				<? } ?>
			</h3>
		<? } ?>
		<a href="/pages/{$day.id}/day">
			<img src="{$day.image_266}">
		</a>
		<ul class="inline">
			<li class="muted"><i class="icon icon-eye-open"></i>&nbsp;{$day.views_count}</li>
			<li class="muted"><i class="icon icon-heart"></i>&nbsp;{$day.likes_count}</li>
			<li class="muted"><i class="icon icon-comments"></i>&nbsp;{$day.comments_count}</li>
			<li class="muted"><small>
					<i class="icon {$day.type|day_type_icon}"></i>
					&nbsp;{$day.type|lowercase|default:'working day'}
			</small></li>
		</ul>
		<a href="/pages/{$day.id}/day">
			<h4>{$day.title|i18n_clip:30}</h4>
		</a>
		<p>{$day.final_description|i18n_clip:350,0,"&hellip;"}</p>
	</li>
{{/template}}

{{template name="small_day"}}
	<? $additional_class = isset($additional_class) ? $additional_class : ''; ?>
	<li class="small-item {$additional_class}">
		<a href="/pages/{$day.id}/day">
			<img src="{$day.image_266}">
		</a>
		<a href="/pages/{$day.id}/day">
			<h5>{$day.title}</h5>
		</a>
		<small>
			<ul class="inline">
				<li class="muted"><i class="icon icon-eye-open"></i>&nbsp;{$day.views_count}</li>
				<li class="muted"><i class="icon icon-heart"></i>&nbsp;{$day.likes_count}</li>
				<li class="muted"><i class="icon icon-comments"></i>&nbsp;{$day.comments_count}</li>
				<li class="muted"><small>
						<i class="icon {$day.type|day_type_icon}"></i>
						&nbsp;{$day.type|lowercase|default:'working day'}
				</small></li>
			</ul>
		</small>
	</li>
{{/template}}

{{wrap with="layout.phtml"}}
{{into slot="content"}}
  <?php if($this->featured_day) { ?>
    <h2><span class="muted">Featured</span></h2>
    <div class="clearfix">
    	<a href="/pages/{$#featured_day->id}/day" class="pull-left" style="margin-right:20px;padding-bottom: 20px">
    		<img src="{$#featured_day->image_266|default:'/img/no_photo.png'}" alt="{$#featured_day->final_description}" />
    	</a>
    	<div>
    		<h3><a href="/pages/{$#featured_day->id}/day">{$#featured_day->title|i18n_clip:40,0,"&hellip;"}</a></h3>
    		<p>{$#featured_day->final_description|i18n_clip:300,0,"&hellip;"}</p>
    	</div>
      {{list using="$#featured_day->moments" counter="$counter"}}
        <ul class="inline">
          {{list:item}}
            <li>
              <a href="/pages/{$#featured_day->id}/day#moment-id{$item->id}"><img style="width:124px" src="{$item->image_532}" alt="{$item->description}" /></a>
            </li>
          {{/list:item}}
        </ul>
      {{/list}}
    </div>
  <?php } ?>

<div class="row-fluid">
	<h2><span class="muted">Journal</span></h2>
	<ul class="items-list">
		{{apply template="medium_day" day="{$#journal_days[0]}"/}}
		{{apply template="medium_day" day="{$#journal_days[1]}"/}}
		<li class="medium-item">
			<div style="border:1px solid #999;padding:10px;">
				<center>
					<h4>Facebook</h4>
					<div class="fb-like-box" data-href="https://www.facebook.com/Onedayofmine" data-width="240" data-height="230"
					     data-show-faces="true" data-stream="false" data-show-border="false" data-header="false">
					</div>
					<br/><br/>
					<h4>VKontakte</h4>
					<script type="text/javascript" src="//vk.com/js/api/openapi.js?96"></script>
					<div id="vk_groups"></div>
					<script type="text/javascript">
						VK.Widgets.Group("vk_groups", {mode: 0, width: "240", height: "150"}, 53796872);
					</script>
				</center>
			</div>
		</li>
		<?php $second_part_journal_days = array_slice($this->journal_days, 2); ?>
		{{list using="{$second_part_journal_days}"}}
			{{list:item}}
				{{apply template="medium_day" day="{$item}"/}}
			{{/list:item}}
		{{/list}}
	</ul>
</div>

<div class="row-fluid">
	<h2 class="muted">Users top</h2>
	<ul class="items-list">
		<li class="big-item">
			<ul class="items-list">
				{{apply template="medium_day" day="{$#top_working}" title="Best working day" icon="cogs"/}}
				{{apply template="medium_day" day="{$#top_dayoff}" title="Best day off" additional_class="last-item" icon="calendar-empty"/}}
				{{apply template="medium_day" day="{$#top_holiday}" title="Best holiday" icon="gift"/}}
				{{apply template="medium_day" day="{$#top_trip}" title="Best trip" additional_class="last-item" icon="rocket"/}}
			</ul>
		</li>
		<li class="medium-item">
			<h3 class="muted">Top days</h3>
			<ul class="items-list">
				{{list using="$#popular_days" counter="$counter"}}
					{{list:item}}
						<? $class = $counter % 2 ? '' : 'last-item'; ?>
						{{apply template="small_day" day="$item" additional_class="$class" /}}
					{{/list:item}}
				{{/list}}
			</ul>
		</li>
	</ul>
</div>

<div class="row-fluid">
	<h2 class="muted">New users</h2>
	<ul class="items-list">
		{{list using="$#new_users"}}
			{{list:item}}
				<li class="user-item">
					<a href="/pages/{$item.id}/user">
						<img class="img-circle pull-left" src="{$item.image_192}">
					</a>
					<a href="/pages/{$item.id}/user">
						<h5>{$item.name}</h5>
					</a>
				</li>
			{{/list:item}}
		{{/list}}
	</ul>
</div>

<div class="row-fluid">
	<h2 class="muted">New days</h2>
	<ul class="items-list">
		{{list using="{$#new_days}"}}
			{{list:item}}
				{{apply template="small_day" day="{$item}"/}}
			{{/list:item}}
		{{/list}}
	</ul>
</div>
{{/into}}
{{into slot="css"}}
h5 {
	font-weight:normal;
}

.items-list .big-item, .items-list .comments-item  {
	width:558px;
}

.items-list .medium-item {
	width:267px;
}

.items-list .small-item,
.items-list .user-item {
	width:122px;
}

.items-list .user-item {
	text-align:center;
}

.comments-item ul.unstyled li {
	vertical-align:top;
}

.items-list {
	margin-left: 0;
	list-style: none;
}

.items-list > li {
	vertical-align:top;
	padding:0 20px 20px 0;
	display: inline-block;
	*display: inline;
	*zoom: 1;
}

.items-list .last-item {
	vertical-align:top;
	padding:0 0 16px 0;
}

p {
	font-size: 15px;
}
{{/into}}
{{/wrap}}